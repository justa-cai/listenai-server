# VoxCPM TTS Server Environment Configuration

# PyTorch Compatibility (Required for PyTorch 2.6+)
# VoxCPM models use legacy .tar format which requires weights_only=False
TORCH_WEIGHTS_ONLY=0

# Disable torch.compile to avoid thread-local storage issues in async executor
TORCH_COMPILE_DISABLE=1
TORCHDYNAMO_DISABLE=1

# Server Configuration
TTS_HOST=0.0.0.0
TTS_PORT=9300         # WebSocket port (Web UI will be on port + 1 = 9301)
TTS_PING_INTERVAL=30
TTS_PING_TIMEOUT=300  # 5 minutes - increased for long TTS generation
TTS_MAX_CONNECTIONS=100
TTS_MAX_CONCURRENT=10
TTS_MAX_QUEUE_SIZE=50
TTS_REQUEST_TIMEOUT=600  # 10 minutes - increased for long TTS generation

# Audio Settings
TTS_CHUNK_SIZE=4096
TTS_SAMPLE_RATE=24000

# Voice Cloning Settings
TTS_VOICE_DIR=voice_clone  # Directory containing voice samples (organized by category)

# Rate Limiting
TTS_RATE_LIMIT_ENABLED=true
TTS_RATE_LIMIT_PER_MINUTE=60

# Monitoring
TTS_METRICS_ENABLED=false
TTS_METRICS_PORT=9090

# Logging
TTS_LOG_LEVEL=INFO
TTS_LOG_FORMAT=json

# Model Configuration
# Can be a HuggingFace model ID (e.g., openbmb/VoxCPM-0.5B)
# or a local path (e.g., VoxCPM-0.5B or /path/to/model)
TTS_MODEL_NAME=VoxCPM-0.5B
TTS_DEVICE=cuda
TTS_MODEL_CACHE_DIR=
TTS_TRUST_REMOTE_CODE=true

# Default TTS Parameters
TTS_DEFAULT_CFG_VALUE=2.0
TTS_DEFAULT_INFERENCE_TIMESTEPS=10
TTS_DEFAULT_NORMALIZE=false
TTS_DEFAULT_DENOISE=false
TTS_DEFAULT_RETRY_BADCASE=true
TTS_DEFAULT_RETRY_MAX_TIMES=3
TTS_DEFAULT_RETRY_RATIO_THRESHOLD=6.0

# Constraints
TTS_MAX_TEXT_LENGTH=5000
